(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?l.credentials="include":e.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(e){if(e.ep)return;e.ep=!0;const l=n(e);fetch(e.href,l)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM fully loaded and parsed"),document.getElementById("aliceDogTokenBalance"),document.getElementById("aliceCatTokenBalance"),document.getElementById("aliceShareOfLiquidityPool"),document.getElementById("bobDogTokenBalance"),document.getElementById("bobCatTokenBalance"),document.getElementById("bobShareOfLiquidityPool"),document.getElementById("carolDogTokenBalance"),document.getElementById("carolCatTokenBalance"),document.getElementById("carolShareOfLiquidityPool"),document.getElementById("daveDogTokenBalance"),document.getElementById("daveCatTokenBalance"),document.getElementById("daveShareOfLiquidityPool"),document.getElementById("dexDogTokenBalance"),document.getElementById("dexCatTokenBalance"),document.getElementById("relativePriceDogTokenInCatToken"),document.getElementById("relativePriceCatTokenInDogToken"),document.getElementById("coinbaseDogTokenPrice"),document.getElementById("coinbaseCatTokenPrice"),document.getElementById("aliceSellOneDogTokenButton").addEventListener("click",d),document.getElementById("aliceBuyOneDogTokenButton").addEventListener("click",s),document.getElementById("bobSellOneCatTokenButton").addEventListener("click",B),document.getElementById("bobBuyOneCatTokenButton").addEventListener("click",k),T(),i()});function T(){aliceDogTokenBalance.innerHTML="100",aliceCatTokenBalance.innerHTML="200",aliceShareOfLiquidityPool.innerHTML="0",bobDogTokenBalance.innerHTML="150",bobCatTokenBalance.innerHTML="250",bobShareOfLiquidityPool.innerHTML="0",carolDogTokenBalance.innerHTML="1100000",carolCatTokenBalance.innerHTML="1100000",carolShareOfLiquidityPool.innerHTML="0",daveDogTokenBalance.innerHTML="1000",daveCatTokenBalance.innerHTML="1000",daveShareOfLiquidityPool.innerHTML="100",dexDogTokenBalance.innerHTML="1000",dexCatTokenBalance.innerHTML="1000",relativePriceDogTokenInCatToken.innerHTML="1",relativePriceCatTokenInDogToken.innerHTML="1",coinbaseDogTokenPrice.innerHTML="1",coinbaseCatTokenPrice.innerHTML="1"}function a(c){return c.toFixed(16).replace(/\.?0+$/,"")}function i(){const c=parseFloat(dexDogTokenBalance.innerHTML),t=parseFloat(dexCatTokenBalance.innerHTML);if(c===0)relativePriceDogTokenInCatToken.innerHTML="Infinity",relativePriceCatTokenInDogToken.innerHTML="0";else if(t===0)relativePriceDogTokenInCatToken.innerHTML="0",relativePriceCatTokenInDogToken.innerHTML="Infinity";else{const n=t/c,o=a(n),e=a(1/n);relativePriceDogTokenInCatToken.innerHTML=o,relativePriceCatTokenInDogToken.innerHTML=e}}function d(){const c=parseFloat(aliceDogTokenBalance.innerHTML),t=parseFloat(aliceCatTokenBalance.innerHTML),n=parseFloat(dexDogTokenBalance.innerHTML),o=parseFloat(dexCatTokenBalance.innerHTML);if(c<1){alert("Alice does not have enough Dog Tokens to sell.");return}const e=1*o/(n+1);aliceDogTokenBalance.innerHTML=a(c-1),aliceCatTokenBalance.innerHTML=a(t+e),dexDogTokenBalance.innerHTML=a(n+1),dexCatTokenBalance.innerHTML=a(o-e),i()}function s(){const c=parseFloat(aliceDogTokenBalance.innerHTML),t=parseFloat(aliceCatTokenBalance.innerHTML),n=parseFloat(dexDogTokenBalance.innerHTML),o=parseFloat(dexCatTokenBalance.innerHTML);if(n<1){alert("DEX does not have enough Dog Tokens for Alice to buy.");return}const e=1*o/(n-1);if(t<e){alert("Alice does not have enough Cat Tokens to buy Dog Tokens.");return}aliceDogTokenBalance.innerHTML=a(c+1),aliceCatTokenBalance.innerHTML=a(t-e),dexDogTokenBalance.innerHTML=a(n-1),dexCatTokenBalance.innerHTML=a(o+e),i()}function B(){const c=parseFloat(bobDogTokenBalance.innerHTML),t=parseFloat(bobCatTokenBalance.innerHTML),n=parseFloat(dexDogTokenBalance.innerHTML),o=parseFloat(dexCatTokenBalance.innerHTML);if(t<1){alert("Bob does not have enough Cat Tokens to sell.");return}const e=1*n/(o+1);bobCatTokenBalance.innerHTML=a(t-1),bobDogTokenBalance.innerHTML=a(c+e),dexCatTokenBalance.innerHTML=a(o+1),dexDogTokenBalance.innerHTML=a(n-e),i()}function k(){const c=parseFloat(bobDogTokenBalance.innerHTML),t=parseFloat(bobCatTokenBalance.innerHTML),n=parseFloat(dexDogTokenBalance.innerHTML),o=parseFloat(dexCatTokenBalance.innerHTML);if(o<1){alert("DEX does not have enough Cat Tokens for Bob to buy.");return}const e=1*n/(o-1);if(c<e){alert("Bob does not have enough Dog Tokens to buy Cat Tokens.");return}bobCatTokenBalance.innerHTML=a(t+1),bobDogTokenBalance.innerHTML=a(c-e),dexCatTokenBalance.innerHTML=a(o-1),dexDogTokenBalance.innerHTML=a(n+e),i()}
